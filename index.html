<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADLAY 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Tajawal', sans-serif; margin: 0; background: #020617; overflow-x: hidden; color: white; }
        #starfield { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .glass-card { background: linear-gradient(135deg, rgba(30, 41, 59, 0.7), rgba(15, 23, 42, 0.8)); backdrop-filter: blur(25px); border-radius: 32px; border: 1px solid rgba(255, 255, 255, 0.05); border-top: 1px solid rgba(255, 255, 255, 0.15); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8); }
        .luxury-transition { animation: luxuryReveal 0.9s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes luxuryReveal { 0% { opacity: 0; transform: scale(0.95) translateY(40px); filter: blur(15px); } 100% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); } }
        .hud-text { font-family: monospace; letter-spacing: 2px; color: #818cf8; background: rgba(129, 140, 248, 0.1); padding: 2px 8px; border-radius: 6px; }
        .tab-active { background: linear-gradient(135deg, #4f46e5, #9333ea); box-shadow: 0 0 20px rgba(147, 51, 234, 0.3); color: white !important; }
        .input-style { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.08); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .input-style:focus { border-color: #818cf8; background: rgba(255, 255, 255, 0.05); box-shadow: 0 0 25px rgba(99, 102, 241, 0.15); }
        .btn-prime { background: linear-gradient(90deg, #6366f1, #a855f7); position: relative; z-index: 1; }
        .hidden { display: none !important; }
        select option { background: #0f172a; color: white; }
        .user-badge { transition: all 0.4s ease; cursor: pointer; border: 1px solid rgba(255, 255, 255, 0.1); }
        .user-badge:hover { box-shadow: 0 0 25px rgba(99, 102, 241, 0.4); border-color: rgba(99, 102, 241, 0.5); background: rgba(255, 255, 255, 0.1); transform: scale(1.02); }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; transition: all 0.3s ease; }
        .status-online { background: #10b981; box-shadow: 0 0 10px #10b981; }
        .status-busy { background: #ef4444; box-shadow: 0 0 10px #ef4444; }
        .status-offline { background: #6b7280; box-shadow: none; }
    </style>
</head>
<body class="p-4 md:p-8">
    <canvas id="starfield"></canvas>

    <div id="authSection" class="min-h-screen flex items-center justify-center">
        <div class="glass-card p-12 w-full max-w-md text-center">
            <div class="mb-8 text-5xl animate-bounce">ğŸª</div>
            <h1 class="text-4xl font-black mb-8 tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-indigo-300 via-purple-300 to-pink-300">Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ù…Ù‡Ù…Ø© 2026</h1>
            <div class="space-y-4">
                <input type="text" id="username" placeholder="ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù‚Ø§Ø¦Ø¯" class="w-full p-5 rounded-2xl input-style text-center outline-none">
                <input type="password" id="password" placeholder="ÙƒÙˆØ¯ Ø§Ù„ÙˆØµÙˆÙ„" class="w-full p-5 rounded-2xl input-style text-center outline-none">
                <button onclick="handleLogin()" class="btn-prime w-full py-5 rounded-2xl font-black text-xl transition-transform active:scale-95">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… âš¡</button>
                <p class="text-[10px] text-gray-500 mt-4 uppercase tracking-widest">Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¯Ø®ÙˆÙ„</p>
            </div>
        </div>
    </div>

    <div id="mainApp" class="max-w-4xl mx-auto hidden">
        <header class="flex flex-col md:flex-row justify-between items-center mb-12 gap-6">
            <div onclick="toggleStatus()" class="user-badge bg-white/5 backdrop-blur-md px-6 py-3 rounded-full flex items-center gap-4 group">
                <div id="statusIndicator" class="status-dot status-online animate-pulse"></div>
                <span class="text-sm font-black" id="userDisp"></span>
            </div>

            <div class="flex bg-black/40 p-1.5 rounded-[22px] border border-white/5 backdrop-blur-xl">
                <button id="tabWeekBtn" onclick="switchTab('week')" class="tab-btn px-8 py-3 rounded-[18px] text-sm font-bold transition-all duration-500 tab-active">Ø£Ø³Ø¨ÙˆØ¹ÙŠ</button>
                <button id="tabYearBtn" onclick="switchTab('year')" class="tab-btn px-8 py-3 rounded-[18px] text-sm font-bold transition-all duration-500 text-gray-500">Ø³Ù†ÙˆÙŠ</button>
            </div>
            
            <div class="flex gap-4">
                <button onclick="downloadReport()" class="text-indigo-400 hover:text-indigo-300 font-bold text-sm">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ğŸ“¥</button>
                <button onclick="logout()" class="text-red-400/60 hover:text-red-400 font-bold text-sm">Ø®Ø±ÙˆØ¬</button>
            </div>
        </header>

        <div id="luxuryWrapper" class="luxury-transition">
            <div class="glass-card p-10 mb-10 border-l-4 border-l-indigo-500">
                <div class="flex flex-col md:flex-row justify-between items-center gap-10">
                    <div class="flex-1 w-full text-right">
                        <div class="flex justify-between mb-4">
                            <h3 id="panelTitle" class="text-xs font-black text-indigo-400 uppercase tracking-[5px]">Ø®Ø·Ø© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</h3>
                            <span class="hud-text text-[10px]" id="currentDate"></span>
                        </div>
                        <div class="flex items-baseline gap-2 mb-8">
                            <span class="text-8xl font-black tracking-tighter" id="percentText">0%</span>
                        </div>
                        <div class="grid grid-cols-3 gap-6">
                            <div class="text-center group">
                                <span class="block text-[10px] text-gray-500 font-bold uppercase">Ø§Ù„ÙƒÙ„</span>
                                <span id="statTotal" class="text-3xl font-black italic">0</span>
                            </div>
                            <div class="text-center group">
                                <span class="block text-[10px] text-green-500/50 font-bold uppercase">Ù…Ù†Ø¬Ø²</span>
                                <span id="statDone" class="text-3xl font-black text-green-400 italic">0</span>
                            </div>
                            <div class="text-center group">
                                <span class="block text-[10px] text-purple-500/50 font-bold uppercase">Ø¨Ø§Ù‚ÙŠ</span>
                                <span id="statPending" class="text-3xl font-black text-purple-400 italic">0</span>
                            </div>
                        </div>
                    </div>
                    <div style="width: 150px;"><canvas id="statsChart"></canvas></div>
                </div>
            </div>

            <div class="glass-card p-3 mb-10">
                <div class="grid grid-cols-1 md:grid-cols-12 gap-3">
                    <input type="text" id="taskInput" placeholder="Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©ØŸ" class="md:col-span-6 p-6 rounded-[24px] bg-transparent outline-none text-xl font-bold">
                    
                    <div id="weekOptions" class="md:col-span-4 flex gap-3 p-2">
                        <select id="taskDay" class="flex-1 bg-white/5 rounded-2xl px-4 outline-none text-xs font-black border border-white/5 appearance-none">
                            <option value="Ø§Ù„Ø³Ø¨Øª">Ø§Ù„Ø³Ø¨Øª</option><option value="Ø§Ù„Ø£Ø­Ø¯">Ø§Ù„Ø£Ø­Ø¯</option><option value="Ø§Ù„Ø§Ø«Ù†ÙŠÙ†">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
                            <option value="Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option><option value="Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option><option value="Ø§Ù„Ø®Ù…ÙŠØ³">Ø§Ù„Ø®Ù…ÙŠØ³</option><option value="Ø§Ù„Ø¬Ù…Ø¹Ø©">Ø§Ù„Ø¬Ù…Ø¹Ø©</option>
                        </select>
                        <input type="time" id="startTime" class="w-24 bg-white/5 rounded-2xl px-4 outline-none text-xs border border-white/5">
                    </div>

                    <div id="yearOptions" class="md:col-span-4 flex gap-3 p-2 hidden">
                        <select id="taskCategory" class="flex-1 bg-white/5 rounded-2xl px-4 outline-none text-xs font-black border border-white/5 appearance-none">
                            <option value="Ø´Ø®ØµÙŠ">ğŸ‘¤ Ø´Ø®ØµÙŠ</option><option value="Ø¹Ù…Ù„">ğŸ’¼ Ø¹Ù…Ù„</option><option value="ØµØ­Ø©">ğŸ ØµØ­Ø©</option><option value="ØªØ¹Ù„Ù…">ğŸ“š ØªØ¹Ù„Ù…</option>
                        </select>
                        <input type="date" id="yearDeadline" class="w-32 bg-white/5 rounded-2xl px-4 outline-none text-[10px] border border-white/5">
                    </div>

                    <button onclick="addItem()" class="md:col-span-2 btn-prime rounded-2xl font-black py-4">Ø¥Ø¶Ø§ÙØ©</button>
                </div>
            </div>

            <div id="itemList" class="space-y-6 pb-12"></div>
            
            <div class="text-center pb-24">
                <button onclick="clearAllData()" class="text-[10px] text-gray-600 hover:text-red-500 transition-colors uppercase tracking-widest font-bold">ØªØµÙÙŠØ± ÙƒØ§ÙØ© Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø© âš ï¸</button>
            </div>
        </div>
    </div>

<script>
    let currentStatus = 'online';
    function toggleStatus() {
        const dot = document.getElementById('statusIndicator');
        if (currentStatus === 'online') {
            dot.className = 'status-dot status-busy animate-pulse';
            currentStatus = 'busy';
        } else if (currentStatus === 'busy') {
            dot.className = 'status-dot status-offline';
            currentStatus = 'offline';
        } else {
            dot.className = 'status-dot status-online animate-pulse';
            currentStatus = 'online';
        }
    }

    document.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            const authSection = document.getElementById('authSection');
            if (!authSection.classList.contains('hidden')) {
                handleLogin();
            } else {
                const taskInput = document.getElementById('taskInput');
                if (document.activeElement === taskInput || document.activeElement.tagName === 'SELECT' || document.activeElement.tagName === 'INPUT') {
                    addItem();
                }
            }
        }
    });

    let currentUser = ""; let currentTab = "week"; let myChart;
    const daysOrder = ["Ø§Ù„Ø³Ø¨Øª", "Ø§Ù„Ø£Ø­Ø¯", "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", "Ø§Ù„Ø®Ù…ÙŠØ³", "Ø§Ù„Ø¬Ù…Ø¹Ø©"];
    document.getElementById('currentDate').innerText = new Date().toISOString().split('T')[0].replace(/-/g, '.');

    function handleLogin() {
        const name = document.getElementById('username').value.trim();
        const pass = document.getElementById('password').value.trim();
        if(!name || !pass) return;
        let auth = JSON.parse(localStorage.getItem('auth_vault') || '{}');
        if(auth[name] && auth[name] !== pass) return alert("ÙƒÙˆØ¯ Ø§Ù„ÙˆØµÙˆÙ„ Ø®Ø§Ø·Ø¦");
        auth[name] = pass;
        localStorage.setItem('auth_vault', JSON.stringify(auth));
        localStorage.setItem('active_user', name);
        checkLogin();
    }

    function checkLogin() {
        currentUser = localStorage.getItem('active_user');
        if(currentUser) {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            document.getElementById('userDisp').innerText = currentUser;
            initChart(); render();
        }
    }

    function switchTab(tab) {
        if(currentTab === tab) return;
        currentTab = tab;
        const wrapper = document.getElementById('luxuryWrapper');
        wrapper.style.animation = 'none'; wrapper.offsetHeight;
        wrapper.style.animation = 'luxuryReveal 0.9s cubic-bezier(0.16, 1, 0.3, 1) forwards';
        document.getElementById('tabWeekBtn').className = `tab-btn px-8 py-3 rounded-[18px] text-sm font-bold transition-all ${tab === 'week' ? 'tab-active' : 'text-gray-500'}`;
        document.getElementById('tabYearBtn').className = `tab-btn px-8 py-3 rounded-[18px] text-sm font-bold transition-all ${tab === 'year' ? 'tab-active' : 'text-gray-500'}`;
        document.getElementById('weekOptions').classList.toggle('hidden', tab !== 'week');
        document.getElementById('yearOptions').classList.toggle('hidden', tab !== 'year');
        document.getElementById('panelTitle').innerText = tab === 'week' ? 'Ø®Ø·Ø© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹' : 'Ø®Ø·Ø© Ø§Ù„Ø³Ù†Ø©';
        render();
    }

    function addItem() {
        const text = document.getElementById('taskInput').value.trim();
        if(!text) return;
        let data = JSON.parse(localStorage.getItem('data_vault') || '{}');
        if(!data[currentUser]) data[currentUser] = { week: [], year: [] };
        const item = { id: Date.now(), text, done: false };
        if(currentTab === 'week') {
            item.day = document.getElementById('taskDay').value;
            item.time = document.getElementById('startTime').value || "--:--";
        } else {
            item.cat = document.getElementById('taskCategory').value;
            item.deadline = document.getElementById('yearDeadline').value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
        }
        data[currentUser][currentTab].push(item);
        localStorage.setItem('data_vault', JSON.stringify(data));
        document.getElementById('taskInput').value = "";
        render();
    }

    function render() {
        const list = document.getElementById('itemList'); list.innerHTML = "";
        const data = (JSON.parse(localStorage.getItem('data_vault') || '{}')[currentUser] || { week: [], year: [] })[currentTab];
        
        if(currentTab === 'week') {
            daysOrder.forEach(day => {
                const dayTasks = data.filter(t => t.day === day);
                if(dayTasks.length) {
                    const h = document.createElement('div'); h.className = "flex items-center gap-4 mt-8 mb-4";
                    h.innerHTML = `<span class="bg-indigo-500/20 text-indigo-400 px-4 py-1 rounded-lg text-[10px] font-black uppercase tracking-[3px]">${day}</span><div class="h-px bg-white/5 flex-1"></div>`;
                    list.appendChild(h);
                    dayTasks.sort((a,b) => a.time.localeCompare(b.time)).forEach(t => list.appendChild(createItemEl(t)));
                }
            });
        } else {
            data.forEach(t => list.appendChild(createItemEl(t)));
        }
        updateStats(data);
    }

    function createItemEl(t) {
        const div = document.createElement('div');
        div.className = `glass-card p-6 flex justify-between items-center transition-all duration-500 ${t.done ? 'opacity-30' : 'hover:translate-x-[-15px] border-r-4 border-r-transparent hover:border-r-indigo-500'}`;
        const info = currentTab === 'week' ? t.time : `${t.deadline} | ${t.cat}`;
        
        div.innerHTML = `
            <div class="flex items-center gap-8">
                <input type="checkbox" ${t.done ? 'checked' : ''} onchange="toggleItem(${t.id})" class="w-7 h-7 rounded-xl accent-indigo-500 cursor-pointer">
                <div>
                    <p class="font-black text-xl ${t.done ? 'line-through text-gray-600' : ''}">${t.text}</p>
                    <span class="hud-text text-[9px] uppercase font-black">${info}</span>
                </div>
            </div>
            <button onclick="deleteItem(${t.id})" class="text-gray-600 hover:text-red-400">âœ•</button>
        `;
        return div;
    }

    function toggleItem(id) {
        let data = JSON.parse(localStorage.getItem('data_vault'));
        data[currentUser][currentTab] = data[currentUser][currentTab].map(t => t.id === id ? {...t, done: !t.done} : t);
        localStorage.setItem('data_vault', JSON.stringify(data)); render();
    }

    function deleteItem(id) {
        let data = JSON.parse(localStorage.getItem('data_vault'));
        data[currentUser][currentTab] = data[currentUser][currentTab].filter(t => t.id !== id);
        localStorage.setItem('data_vault', JSON.stringify(data)); render();
    }

    function updateStats(items) {
        const done = items.filter(t => t.done).length; const total = items.length;
        const pct = total ? Math.round((done/total)*100) : 0;
        document.getElementById('percentText').innerText = pct + '%';
        document.getElementById('statTotal').innerText = total;
        document.getElementById('statDone').innerText = done;
        document.getElementById('statPending').innerText = total - done;
        if(myChart) { myChart.data.datasets[0].data = [done, total === 0 ? 1 : total - done]; myChart.update(); }
    }

    function initChart() {
        const ctxChart = document.getElementById('statsChart').getContext('2d');
        if(myChart) myChart.destroy();
        myChart = new Chart(ctxChart, { type: 'doughnut', data: { datasets: [{ data: [0, 1], backgroundColor: ['#6366f1', 'rgba(255,255,255,0.03)'], borderWidth: 0 }] }, options: { cutout: '85%' } });
    }

    // Ø¯ÙˆØ§Ù„ Ø¬Ø¯ÙŠØ¯Ø© (Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ø³Ø­)
    function downloadReport() {
        const data = JSON.parse(localStorage.getItem('data_vault') || '{}')[currentUser] || { week: [], year: [] };
        let content = `ØªÙ‚Ø±ÙŠØ± Ù…Ù‡Ù…Ø© ADLAY 2026 - Ø§Ù„Ù‚Ø§Ø¦Ø¯: ${currentUser}\n`;
        content += `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date().toLocaleString()}\n`;
        content += `========================================\n\n`;

        content += `--- Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© ---\n`;
        if(data.week.length === 0) content += "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù….\n";
        data.week.forEach(t => {
            content += `[${t.done ? 'âœ“' : ' '}] ${t.day} | ${t.time} : ${t.text}\n`;
        });

        content += `\n--- Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© ---\n`;
        if(data.year.length === 0) content += "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù….\n";
        data.year.forEach(t => {
            content += `[${t.done ? 'âœ“' : ' '}] Ø§Ù„Ù…ÙˆØ¹Ø¯: ${t.deadline} | Ø§Ù„Ù†ÙˆØ¹: ${t.cat} : ${t.text}\n`;
        });

        const blob = new Blob([content], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `ADLAY_Report_${currentUser}.txt`;
        a.click();
    }

    function clearAllData() {
        if(confirm("ØªØ­Ø°ÙŠØ±: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ")) {
            let data = JSON.parse(localStorage.getItem('data_vault') || '{}');
            data[currentUser] = { week: [], year: [] };
            localStorage.setItem('data_vault', JSON.stringify(data));
            render();
            alert("ØªÙ… ØªØµÙÙŠØ± Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø¨Ù†Ø¬Ø§Ø­.");
        }
    }

    const canvas = document.getElementById('starfield'); const ctx = canvas.getContext('2d');
    let stars = []; function initStars() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; stars = Array(400).fill().map(() => ({ x: Math.random() * canvas.width - canvas.width / 2, y: Math.random() * canvas.height - canvas.height / 2, z: Math.random() * canvas.width })); }
    function updateStars() { ctx.fillStyle = "#020617"; ctx.fillRect(0, 0, canvas.width, canvas.height); ctx.translate(canvas.width / 2, canvas.height / 2); stars.forEach(s => { s.z -= 0.6; if (s.z <= 0) s.z = canvas.width; let x = s.x * (canvas.width / s.z); let y = s.y * (canvas.width / s.z); ctx.beginPath(); ctx.arc(x, y, (1 - s.z / canvas.width) * 1.5, 0, Math.PI * 2); ctx.fillStyle = "white"; ctx.fill(); }); ctx.translate(-canvas.width / 2, -canvas.height / 2); requestAnimationFrame(updateStars); }
    initStars(); updateStars();

    function logout() { localStorage.removeItem('active_user'); location.reload(); }
    window.onload = checkLogin;
</script>
</body>
</html>
